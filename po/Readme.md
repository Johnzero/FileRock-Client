# Managing translations

## Preliminaries

FileRock Client adopts the **gettext** suite to support i18n. This implies three kinds of files:

1. `filerock-client.pot`: a generated text file that contains all textual strings collected by scanning FileRock Client's source files.

2. `xx.po`: text files that contains a translation to language `xx` for every textual string. E.g.: `en.po`. Each `.po` file is initialized as a copy of `filerock-client.pot` and then it's manually edited by translators.

3. `xx.mo`: binary file generated by compiling `xx.po`.

In order to install a translated version of FileRock Client, the desired `xx.mo` files must be copied to some standard filesystem location. If FileRock can't find a suitable `xx.mo` when it's started, it will ignore i18n and will just use English. For instance this happens when FileRock Client is started from a cloned GIT repository, without installing it.

Our installer (see: `setup.py`) uses the **distutils-extra** python package to support gettext i18n, which does all the necessary work. To just install FileRock Client from a cloned GIT repository, all you must do is to have installed both `distutils-extra` and also the `intltool` suite, which is used as a dependency. See the general README file for details.

## How to create a new translation

1. In order to generate a translation, the file `filerock-client.pot` is required. If such file is not into this folder, you can generate it by moving to the project root path and running the command `python setup.py build_i18n`

2. The base of the translation file (the .po file) can be generated with the command `msginit --locale=LL_CC --input=filerock-client.pot` where `LL_CC` is the locale of the translation you want to write, e.g. for `en_US` will be the one for `English (US)`: this command will generate a `*.po` file, named LL or LL_CC, depending on the chosen locale. Note that you have to `CHDIR` to this folder, for `msginit` to work.

3. This file in generated in gettext format: empty fields can be compiled with the translations.

4. The `*.po` file must be compiled into a `*.mo` file. You can do this running the command `python setup.py build_i18n` from the project root.

5. The `*.mo` is generated as `build/mo/LL_CC/LC_MESSAGES/filerock-client.mo`

6. The translation is now ready but the `*.mo` file must be moved into your locale system directory (e.g., `cp build/mo/en_US/LC_MESSAGES/filerock-client.mo /usr/locale/en_US/LC_MESSAGES/` )

7. You can check your translation by running the client, e.g. with `LANG=en_US.UTF-8 ./FileRock.py`

If you want to submit your translation to the FileRock team, please check your message and if everything looks good send the `.po` file to support@filerock.com to be included in the next releases.

# How to update an existing translation

It happens that a `xx.po` file gets obsolete with respect to the `.pot` file that generated it. They can be merged with the command `python setup.py build_i18n -m`, which produces a new file `xx1.po` which replaces the old one.
